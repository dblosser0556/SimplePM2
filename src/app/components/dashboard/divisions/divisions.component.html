<div *ngIf="isLoading">
  <span class="spinner spinner-inline">
    Loading...
  </span>
  <span>
    Loading...
  </span>
</div>
<div class="row">
  <div class="column">
    <nav class="sidenav">
      <section class="sidenav-content">
        <label>
          <h4>Filters</h4>
        </label>
        <section class="form-block">
          <label><h5>Organization</h5></label>
          <clr-tree-node *ngFor="let group of rootGroups" (change)="applyFilter(group)" [(clrSelected)]="group.selected">
              <label class="filter-label">{{group.groupName}}</label>
              <span class="badge badge-orange">1</span>
              <span class="badge">3</span>
            
            <ng-template *ngIf="group.hasChildren" clrIfExpanded>
              <app-tree-node [parentId]="group.groupId" [groups]="group.groups"></app-tree-node>
            </ng-template>
          </clr-tree-node>
        </section>
        <section class="form-block">
          <label><h5>Year</h5></label>
          <clr-checkbox *ngFor="let year of years" (change)="applyYearFilter(year)" 
            [clrDisabled]="year.disabled" [(clrChecked)]="year.selected">
            <label class="filter-label">{{year.value}}</label>
            <span class="badge badge-orange filter-badge">{{year.filteredCount}}</span>
            <span class="badge filter-badge">{{year.unfilteredCount}}</span>
            </clr-checkbox>
        </section>
        <section class="form-block">
          <label><h5>Status</h5></label>
          <clr-checkbox  *ngFor="let stat of status" (change)="applyStatusFilter(stat)"  
            [clrDisabled]="stat.disabled" [(clrChecked)]="stat.selected">
            <label class="filter-label">{{stat.value}}</label>
            <span class="badge badge-orange filter-badge">{{stat.filteredCount}}</span>
            <span class="badge filter-badge">{{stat.unfilteredCount}}</span>
          </clr-checkbox>
        </section>
        <section>
          <label><h4>Select Budget</h4></label>
          <clr-checkbox [(clrChecked)]="viewCapValues" (change)="showCapChart()" title="Show Capital Projections">
            <label class="filter-label">Capital</label>
          </clr-checkbox>

          <clr-checkbox [(clrChecked)]="viewExpValues" (change)="showExpChart()" title="Show Expense Projections">
            <label class="filter-label">Expense</label>
          </clr-checkbox>

        </section>

        <button class="btn btn-sm" title="Reset Filter" (click)="resetFilter()">Reset</button>
      </section>
    </nav>
  </div>
  <div class="column">
    <ngx-charts-line-chart [view]="view" [scheme]="colorScheme" [results]="data" [gradient]="gradient" [xAxis]="showXAxis" [yAxis]="showYAxis"
      [legend]="showLegend" [showXAxisLabel]="showXAxisLabel" [showYAxisLabel]="showYAxisLabel" [xAxisLabel]="xAxisLabel" [yAxisLabel]="yAxisLabel"
      [autoScale]="autoScale">
    </ngx-charts-line-chart>
    <div></div>
  </div>
</div>

<!-- <div class="row" *ngIf="!isLoading">
  <div style="width:30%">
    <span>
      <h4>Group</h4>
    </span>
    <clr-tree-node *ngFor="let group of rootGroups" [(clrSelected)]="group.selected">
      {{group.groupName}}
      <ng-template *ngIf="group.hasChildren" clrIfExpanded>
        <app-tree-node [parentId]="group.groupId" [groups]="group.groups"></app-tree-node>
      </ng-template>
    </clr-tree-node>
    <button class="btn btn-sm" title="Apply Filter" (click)="applyFilter()">Apply</button>
  </div>
  <div style="width:30%">
    <span>
      <h4>Status</h4>
    </span>
    <div class="btn-group btn-primary">
      <button *ngFor="let stat of status" class="btn">{{stat.statusName}}</button>
    </div>
  </div>
</div> 
<div class="row" *ngIf="!isLoading">
  
</div>
<div class="row">
  <clr-checkbox [clrChecked]="viewCapValues" [clrInline]="true" (change)="showCapChart()" title="Show Capital Projections">
    Capital
  </clr-checkbox>

  <clr-checkbox [clrChecked]="viewExpValues" [clrInline]="true" (change)="showExpChart()" title="Show Expense Projections">
    Expense
  </clr-checkbox>


  <button class="btn btn-info btn-sm" (click)="showEnlargedChart()">Enlarge</button>
</div>-->
